!function(){action.eventMe({init:function(){var e=this,t=0,n=document.querySelectorAll(".game-board--box"),i=function(){t++,t>=9&&(e.emit("game:tie"),e.emit("game:reset"))},o=function(e){return parseInt(e.value,10)};[].forEach.call(n,function(t){t.addEventListener("click",function(){var n=o(t.attributes["data-row"]),i=o(t.attributes["data-col"]);""===t.textContent&&(t.textContent=e.active,e.emit("game:move:"+e.active,{row:n,col:i}))})}),e.listen("game:win",function(){e.emit("game:reset")}),e.listen("game:start",function(){e.active="x"}),e.listen("game:move:x",function(){e.active="o",i()}),e.listen("game:move:o",function(){e.active="x",i()}),e.listen("game:reset",function(){t=0}),e.listen("game:setup",function(){e.active="x",e.setup||(e.setup=!0,e.emit("game:newplayer","x"),e.emit("game:newplayer","o")),[].forEach.call(n,function(e){e.textContent=""}),e.emit("game:start")})}})}(),function(){action.eventMe({init:function(){var e=this,t={},n=document.querySelector(".game-keeper");e.listen("game:win",function(e){t[e]++,n.textContent="X: "+t.x+" | O: "+t.o,n.classList.remove("hidden")}),e.listen("game:reset",function(){n.classList.add("hidden")}),e.listen("game:addplayer",function(e){"undefined"==typeof t[e.id]&&(t[e.id]=0)})}})}(),function(){var e=function(e){var t=e,n=0;return t.forEach(function(e){n+=e}),n},t=function(t,n,i){var o,a,c;return Array.isArray(t)&&(o=t),Array.isArray(n)&&(a=n),Array.isArray(i)&&(c=i),function(t){return e([o[t],a[t],c[t]])}},n=function(t,n){var i=[];return n?(i[0]=t[0][0],i[2]=t[2][2]):(i[0]=t[0][2],i[2]=t[2][0]),i[1]=t[1][1],e(i)};action.eventMe({init:function(){var i=this;i.listen("game:newplayer",function(i){var o=action.eventMe({id:i,moves:[[0,0,0],[0,0,0],[0,0,0]]}),a=function(){var i,a=!(3!==e(o.moves[0])&&3!==e(o.moves[1])&&3!==e(o.moves[2])),c=!(3!==n(o.moves,!0)&&3!==n(o.moves,!1)),r=t(o.moves[0],o.moves[1],o.moves[2]);i=!(3!==r(0)&&3!==r(1)&&3!==r(2)),(a||i||c)&&o.emit("game:win",o.id)};o.listen("game:move:"+o.id,function(e){o.moves[e.row][e.col]=1,a()}),o.listen("game:reset",function(){o.moves=[[0,0,0],[0,0,0],[0,0,0]]}),o.emit("game:addplayer",o)})}})}(),function(){action.eventMe({init:function(){var e=this,t=document.querySelector(".start-game--button"),n=document.querySelector(".start-game");e.listen("game:reset",function(){n.classList.remove("hidden")}),t.addEventListener("click",function(){e.emit("game:setup"),n.classList.add("hidden")})}})}(),function(){action.eventMe({init:function(){var e=this,t=document.querySelector(".victor");e.listen("game:win",function(e){t.textContent=e.toUpperCase()+" Wins!",t.classList.remove("hidden")}),e.listen("game:tie",function(){t.textContent="No one wins :-(",t.classList.remove("hidden")}),e.listen("game:reset",function(){t.classList.add("hidden")})}})}();